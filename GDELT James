library(readr)
library(dplyr)

#Import data from downloads folder
GDELT <- read.csv("C:\\Users\\redmoj\\Downloads\\GDELT_gkg_f8_package1.csv")

#Structure and info of GDELT
str(GDELT)
glimpse(GDELT)
class(GDELT)
summary(GDELT)

#Count number of Rows & Columns
nrow(GDELT)
ncol(GDELT)
#Alternativley
dim(GDELT) 

#Column Names
colnames(GDELT)

#First & last entry from document source 
GDELT$documentSource[1]
GDELT$documentSource[length(GDELT$documentSource)]


#Count number of soruces from The Mirror
length(grep("mirror.co.uk", GDELT$documentSource))

#Count from Date
library(lubridate)

#Work around - Counts data from February: 
length(grep("2015-02", GDELT$dateTimeDocument))

#Create POSIXlt & POSIXt
dates <- substr(GDELT$dateTimeDocument, 1, 10) 
times <- substr(GDELT$dateTimeDocument, 12, 19) 
GDELT$dateTime <- paste(dates, times) 
dateTimeEdit <- strptime(GDELT$dateTime, "%Y-%m-%d %H:%M:%S", tz = "GMT")

#Count number of sources from London 
length(grep("London", GDELT$locationsCharLoc))

#Built Data Frame for Bar Chart of document sources
investors <- length(grep("investors.com", GDELT$documentSource))
salon <- length(grep("salon.com", GDELT$documentSource))
mirror <- length(grep("mirror.co.uk", GDELT$documentSource))
newyorker <- length(grep("newyorker.com", GDELT$documentSource))
reuters <- length(grep("reuters.com", GDELT$documentSource))
dailymail <- length(grep("dailymail.co.uk", GDELT$documentSource))
bloomberg <- length(grep("bloomberg.com", GDELT$documentSource))
thetimes <- length(grep("thetimes.co.uk", GDELT$documentSource))

websites <- c("Investors", "Mirror", "NewYorker", "Salon", "Reuters", "Dailymail", "Bloomberg", "TheTimes")
numberofposts <- c(investors, mirror, newyorker, salon, reuters, dailymail, bloomberg, thetimes)
df <- data.frame(websites, numberofposts)

ggplot(df, aes(x = websites, y = numberofposts)) +geom_bar(stat = "identity") 
